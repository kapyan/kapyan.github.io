<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>运维之窗</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.kapyan.top/"/>
  <updated>2019-01-05T09:34:56.039Z</updated>
  <id>http://blog.kapyan.top/</id>
  
  <author>
    <name>没有风的晴天</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>nginx安装</title>
    <link href="http://blog.kapyan.top/nginx%E5%AE%89%E8%A3%85.html"/>
    <id>http://blog.kapyan.top/nginx安装.html</id>
    <published>2019-01-05T07:16:53.000Z</published>
    <updated>2019-01-05T09:34:56.039Z</updated>
    
    <content type="html"><![CDATA[<h2 id="通过存储库安装nginx"><a href="#通过存储库安装nginx" class="headerlink" title="通过存储库安装nginx"></a>通过存储库安装nginx</h2><p>CentOS 6.x系统：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">"[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/6/<span class="variable">$(uname -m)</span>/\ngpgcheck=0\nenabled=1"</span>&gt;&gt;/etc/yum.repos.d/nginx.repo</span><br><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure></p><p>CentOS 7.x系统：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">"[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/7/<span class="variable">$(uname -m)</span>/\ngpgcheck=0\nenabled=1"</span>&gt;&gt;/etc/yum.repos.d/nginx.repo</span><br><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure></p><p>ubuntu系统：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">echo</span> -e <span class="string">"deb http://nginx.org/packages/ubuntu/ codename nginx\ndeb-src http://nginx.org/packages/ubuntu/ codename nginx"</span>&gt;&gt;/etc/apt/sources.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -y nginx</span><br></pre></td></tr></table></figure></p><h2 id="源码编译安装nginx"><a href="#源码编译安装nginx" class="headerlink" title="源码编译安装nginx"></a>源码编译安装nginx</h2><p><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">nginx各版本源码包下载</a><br>以nginx-1.142为例<br>centos系统：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useradd -M -s /sbin/nologin www<span class="comment">#创建nginx运行用户</span></span><br><span class="line">yum -y install gcc pcre pcre-devel openssl openssl-devel zlib-devel gd gd-devel perl perl-ExtUtils-Embed <span class="comment">#安装依赖</span></span><br><span class="line">wget http://nginx.org/download/nginx-1.14.2.tar.gz<span class="comment">#下载nginx-1.14.2</span></span><br><span class="line">tar xf nginx-1.14.2.tar.gz <span class="comment">#解压nginx压缩包</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.14.2</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx-1.14.2 --user=www --group=www --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gzip_static_module --with-http_perl_module --with-mail --with-mail_ssl_module --with-http_stub_status_module <span class="comment">#设置编译参数</span></span><br><span class="line">make &amp;&amp; make install<span class="comment">#编译安装</span></span><br></pre></td></tr></table></figure></p><div><div class="fold_hider"><div class="close hider_title">nginx编译参数</div></div><div class="fold"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line">./configure --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">--prefix=path  <span class="comment">#指定nginx安装路径，默认是/usr/local/nginx</span></span><br><span class="line">--sbin-path=path  <span class="comment">#指定二进制可执行文件路径，默认是prefix/sbin/nginx.</span></span><br><span class="line">--modules-path=path <span class="comment">#指定modules路径，默认是prefix/modules</span></span><br><span class="line">--conf-path=path <span class="comment">#指定nginx配置文件路径，默认是prefix/conf/nginx.conf.</span></span><br><span class="line">--error-log-path=path <span class="comment">#指定错误日志文件路径，默认是prefix/logs/error.log.</span></span><br><span class="line">--pid-path=path</span><br><span class="line">sets the name of an nginx.pid file that will store the process ID of the main process. After installation, the file name can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the pid directive. By default the file is named prefix/logs/nginx.pid.</span><br><span class="line">--lock-path=path</span><br><span class="line">sets a prefix <span class="keyword">for</span> the names of lock files. After installation, the value can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the lock_file directive. By default the value is prefix/logs/nginx.lock.</span><br><span class="line">--user=name</span><br><span class="line">sets the name of an unprivileged user whose credentials will be used by worker processes. After installation, the name can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the user directive. The default user name is nobody.</span><br><span class="line">--group=name</span><br><span class="line">sets the name of a group whose credentials will be used by worker processes. After installation, the name can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the user directive. By default, a group name is <span class="built_in">set</span> to the name of an unprivileged user.</span><br><span class="line">--build=name</span><br><span class="line">sets an optional nginx build name.</span><br><span class="line">--builddir=path</span><br><span class="line">sets a build directory.</span><br><span class="line">--with-select_module</span><br><span class="line">--without-select_module</span><br><span class="line">enables or disables building a module that allows the server to work with the select() method. This module is built automatically <span class="keyword">if</span> the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</span><br><span class="line">--with-poll_module</span><br><span class="line">--without-poll_module</span><br><span class="line">enables or disables building a module that allows the server to work with the poll() method. This module is built automatically <span class="keyword">if</span> the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</span><br><span class="line">--with-threads</span><br><span class="line">enables the use of thread pools.</span><br><span class="line">--with-file-aio</span><br><span class="line">enables the use of asynchronous file I/O (AIO) on FreeBSD and Linux.</span><br><span class="line">--with-http_ssl_module</span><br><span class="line">enables building a module that adds the HTTPS protocol support to an HTTP server. This module is not built by default. The OpenSSL library is required to build and run this module.</span><br><span class="line">--with-http_v2_module</span><br><span class="line">enables building a module that provides support <span class="keyword">for</span> HTTP/2. This module is not built by default.</span><br><span class="line">--with-http_realip_module</span><br><span class="line">enables building the ngx_http_realip_module module that changes the client address to the address sent <span class="keyword">in</span> the specified header field. This module is not built by default.</span><br><span class="line">--with-http_addition_module</span><br><span class="line">enables building the ngx_http_addition_module module that adds text before and after a response. This module is not built by default.</span><br><span class="line">--with-http_xslt_module</span><br><span class="line">--with-http_xslt_module=dynamic</span><br><span class="line">enables building the ngx_http_xslt_module module that transforms XML responses using one or more XSLT stylesheets. This module is not built by default. The libxml2 and libxslt libraries are required to build and run this module.</span><br><span class="line">--with-http_image_filter_module</span><br><span class="line">--with-http_image_filter_module=dynamic</span><br><span class="line">enables building the ngx_http_image_filter_module module that transforms images <span class="keyword">in</span> JPEG, GIF, PNG, and WebP formats. This module is not built by default.</span><br><span class="line">--with-http_geoip_module</span><br><span class="line">--with-http_geoip_module=dynamic</span><br><span class="line">enables building the ngx_http_geoip_module module that creates variables depending on the client IP address and the precompiled MaxMind databases. This module is not built by default.</span><br><span class="line">--with-http_sub_module</span><br><span class="line">enables building the ngx_http_sub_module module that modifies a response by replacing one specified string by another. This module is not built by default.</span><br><span class="line">--with-http_dav_module</span><br><span class="line">enables building the ngx_http_dav_module module that provides file management automation via the WebDAV protocol. This module is not built by default.</span><br><span class="line">--with-http_flv_module</span><br><span class="line">enables building the ngx_http_flv_module module that provides pseudo-streaming server-side support <span class="keyword">for</span> Flash Video (FLV) files. This module is not built by default.</span><br><span class="line">--with-http_mp4_module</span><br><span class="line">enables building the ngx_http_mp4_module module that provides pseudo-streaming server-side support <span class="keyword">for</span> MP4 files. This module is not built by default.</span><br><span class="line">--with-http_gunzip_module</span><br><span class="line">enables building the ngx_http_gunzip_module module that decompresses responses with “Content-Encoding: gzip” <span class="keyword">for</span> clients that <span class="keyword">do</span> not support “gzip” encoding method. This module is not built by default.</span><br><span class="line">--with-http_gzip_static_module</span><br><span class="line">enables building the ngx_http_gzip_static_module module that enables sending precompressed files with the “.gz” filename extension instead of regular files. This module is not built by default.</span><br><span class="line">--with-http_auth_request_module</span><br><span class="line">enables building the ngx_http_auth_request_module module that implements client authorization based on the result of a subrequest. This module is not built by default.</span><br><span class="line">--with-http_random_index_module</span><br><span class="line">enables building the ngx_http_random_index_module module that processes requests ending with the slash character (‘/’) and picks a random file <span class="keyword">in</span> a directory to serve as an index file. This module is not built by default.</span><br><span class="line">--with-http_secure_link_module</span><br><span class="line">enables building the ngx_http_secure_link_module module. This module is not built by default.</span><br><span class="line">--with-http_degradation_module</span><br><span class="line">enables building the ngx_http_degradation_module module. This module is not built by default.</span><br><span class="line">--with-http_slice_module</span><br><span class="line">enables building the ngx_http_slice_module module that splits a request into subrequests, each returning a certain range of response. The module provides more effective caching of big responses. This module is not built by default.</span><br><span class="line">--with-http_stub_status_module</span><br><span class="line">enables building the ngx_http_stub_status_module module that provides access to basic status information. This module is not built by default.</span><br><span class="line">--without-http_charset_module</span><br><span class="line">disables building the ngx_http_charset_module module that adds the specified charset to the “Content-Type” response header field and can additionally convert data from one charset to another.</span><br><span class="line">--without-http_gzip_module</span><br><span class="line">disables building a module that compresses responses of an HTTP server. The zlib library is required to build and run this module.</span><br><span class="line">--without-http_ssi_module</span><br><span class="line">disables building the ngx_http_ssi_module module that processes SSI (Server Side Includes) commands <span class="keyword">in</span> responses passing through it.</span><br><span class="line">--without-http_userid_module</span><br><span class="line">disables building the ngx_http_userid_module module that sets cookies suitable <span class="keyword">for</span> client identification.</span><br><span class="line">--without-http_access_module</span><br><span class="line">disables building the ngx_http_access_module module that allows limiting access to certain client addresses.</span><br><span class="line">--without-http_auth_basic_module</span><br><span class="line">disables building the ngx_http_auth_basic_module module that allows limiting access to resources by validating the user name and password using the “HTTP Basic Authentication” protocol.</span><br><span class="line">--without-http_mirror_module</span><br><span class="line">disables building the ngx_http_mirror_module module that implements mirroring of an original request by creating background mirror subrequests.</span><br><span class="line">--without-http_autoindex_module</span><br><span class="line">disables building the ngx_http_autoindex_module module that processes requests ending with the slash character (‘/’) and produces a directory listing <span class="keyword">in</span> <span class="keyword">case</span> the ngx_http_index_module module cannot find an index file.</span><br><span class="line">--without-http_geo_module</span><br><span class="line">disables building the ngx_http_geo_module module that creates variables with values depending on the client IP address.</span><br><span class="line">--without-http_map_module</span><br><span class="line">disables building the ngx_http_map_module module that creates variables with values depending on values of other variables.</span><br><span class="line">--without-http_split_clients_module</span><br><span class="line">disables building the ngx_http_split_clients_module module that creates variables <span class="keyword">for</span> A/B testing.</span><br><span class="line">--without-http_referer_module</span><br><span class="line">disables building the ngx_http_referer_module module that can block access to a site <span class="keyword">for</span> requests with invalid values <span class="keyword">in</span> the “Referer” header field.</span><br><span class="line">--without-http_rewrite_module</span><br><span class="line">disables building a module that allows an HTTP server to redirect requests and change URI of requests. The PCRE library is required to build and run this module.</span><br><span class="line">--without-http_proxy_module</span><br><span class="line">disables building an HTTP server proxying module.</span><br><span class="line">--without-http_fastcgi_module</span><br><span class="line">disables building the ngx_http_fastcgi_module module that passes requests to a FastCGI server.</span><br><span class="line">--without-http_uwsgi_module</span><br><span class="line">disables building the ngx_http_uwsgi_module module that passes requests to a uwsgi server.</span><br><span class="line">--without-http_scgi_module</span><br><span class="line">disables building the ngx_http_scgi_module module that passes requests to an SCGI server.</span><br><span class="line">--without-http_grpc_module</span><br><span class="line">disables building the ngx_http_grpc_module module that passes requests to a gRPC server.</span><br><span class="line">--without-http_memcached_module</span><br><span class="line">disables building the ngx_http_memcached_module module that obtains responses from a memcached server.</span><br><span class="line">--without-http_limit_conn_module</span><br><span class="line">disables building the ngx_http_limit_conn_module module that limits the number of connections per key, <span class="keyword">for</span> example, the number of connections from a single IP address.</span><br><span class="line">--without-http_limit_req_module</span><br><span class="line">disables building the ngx_http_limit_req_module module that limits the request processing rate per key, <span class="keyword">for</span> example, the processing rate of requests coming from a single IP address.</span><br><span class="line">--without-http_empty_gif_module</span><br><span class="line">disables building a module that emits single-pixel transparent GIF.</span><br><span class="line">--without-http_browser_module</span><br><span class="line">disables building the ngx_http_browser_module module that creates variables whose values depend on the value of the “User-Agent” request header field.</span><br><span class="line">--without-http_upstream_hash_module</span><br><span class="line">disables building a module that implements the <span class="built_in">hash</span> load balancing method.</span><br><span class="line">--without-http_upstream_ip_hash_module</span><br><span class="line">disables building a module that implements the ip_hash load balancing method.</span><br><span class="line">--without-http_upstream_least_conn_module</span><br><span class="line">disables building a module that implements the least_conn load balancing method.</span><br><span class="line">--without-http_upstream_keepalive_module</span><br><span class="line">disables building a module that provides caching of connections to upstream servers.</span><br><span class="line">--without-http_upstream_zone_module</span><br><span class="line">disables building a module that makes it possible to store run-time state of an upstream group <span class="keyword">in</span> a shared memory zone.</span><br><span class="line">--with-http_perl_module</span><br><span class="line">--with-http_perl_module=dynamic</span><br><span class="line">enables building the embedded Perl module. This module is not built by default.</span><br><span class="line">--with-perl_modules_path=path</span><br><span class="line">defines a directory that will keep Perl modules.</span><br><span class="line">--with-perl=path</span><br><span class="line">sets the name of the Perl binary.</span><br><span class="line">--http-log-path=path</span><br><span class="line">sets the name of the primary request <span class="built_in">log</span> file of the HTTP server. After installation, the file name can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the access_log directive. By default the file is named prefix/logs/access.log.</span><br><span class="line">--http-client-body-temp-path=path</span><br><span class="line">defines a directory <span class="keyword">for</span> storing temporary files that hold client request bodies. After installation, the directory can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the client_body_temp_path directive. By default the directory is named prefix/client_body_temp.</span><br><span class="line">--http-proxy-temp-path=path</span><br><span class="line">defines a directory <span class="keyword">for</span> storing temporary files with data received from proxied servers. After installation, the directory can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the proxy_temp_path directive. By default the directory is named prefix/proxy_temp.</span><br><span class="line">--http-fastcgi-temp-path=path</span><br><span class="line">defines a directory <span class="keyword">for</span> storing temporary files with data received from FastCGI servers. After installation, the directory can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the fastcgi_temp_path directive. By default the directory is named prefix/fastcgi_temp.</span><br><span class="line">--http-uwsgi-temp-path=path</span><br><span class="line">defines a directory <span class="keyword">for</span> storing temporary files with data received from uwsgi servers. After installation, the directory can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the uwsgi_temp_path directive. By default the directory is named prefix/uwsgi_temp.</span><br><span class="line">--http-scgi-temp-path=path</span><br><span class="line">defines a directory <span class="keyword">for</span> storing temporary files with data received from SCGI servers. After installation, the directory can always be changed <span class="keyword">in</span> the nginx.conf configuration file using the scgi_temp_path directive. By default the directory is named prefix/scgi_temp.</span><br><span class="line">--without-http</span><br><span class="line">disables the HTTP server.</span><br><span class="line">--without-http-cache</span><br><span class="line">disables HTTP cache.</span><br><span class="line">--with-mail</span><br><span class="line">--with-mail=dynamic</span><br><span class="line">enables POP3/IMAP4/SMTP mail proxy server.</span><br><span class="line">--with-mail_ssl_module</span><br><span class="line">enables building a module that adds the SSL/TLS protocol support to the mail proxy server. This module is not built by default. The OpenSSL library is required to build and run this module.</span><br><span class="line">--without-mail_pop3_module</span><br><span class="line">disables the POP3 protocol <span class="keyword">in</span> mail proxy server.</span><br><span class="line">--without-mail_imap_module</span><br><span class="line">disables the IMAP protocol <span class="keyword">in</span> mail proxy server.</span><br><span class="line">--without-mail_smtp_module</span><br><span class="line">disables the SMTP protocol <span class="keyword">in</span> mail proxy server.</span><br><span class="line">--with-stream</span><br><span class="line">--with-stream=dynamic</span><br><span class="line">enables building the stream module <span class="keyword">for</span> generic TCP/UDP proxying and load balancing. This module is not built by default.</span><br><span class="line">--with-stream_ssl_module</span><br><span class="line">enables building a module that adds the SSL/TLS protocol support to the stream module. This module is not built by default. The OpenSSL library is required to build and run this module.</span><br><span class="line">--with-stream_realip_module</span><br><span class="line">enables building the ngx_stream_realip_module module that changes the client address to the address sent <span class="keyword">in</span> the PROXY protocol header. This module is not built by default.</span><br><span class="line">--with-stream_geoip_module</span><br><span class="line">--with-stream_geoip_module=dynamic</span><br><span class="line">enables building the ngx_stream_geoip_module module that creates variables depending on the client IP address and the precompiled MaxMind databases. This module is not built by default.</span><br><span class="line">--with-stream_ssl_preread_module</span><br><span class="line">enables building the ngx_stream_ssl_preread_module module that allows extracting information from the ClientHello message without terminating SSL/TLS. This module is not built by default.</span><br><span class="line">--without-stream_limit_conn_module</span><br><span class="line">disables building the ngx_stream_limit_conn_module module that limits the number of connections per key, <span class="keyword">for</span> example, the number of connections from a single IP address.</span><br><span class="line">--without-stream_access_module</span><br><span class="line">disables building the ngx_stream_access_module module that allows limiting access to certain client addresses.</span><br><span class="line">--without-stream_geo_module</span><br><span class="line">disables building the ngx_stream_geo_module module that creates variables with values depending on the client IP address.</span><br><span class="line">--without-stream_map_module</span><br><span class="line">disables building the ngx_stream_map_module module that creates variables with values depending on values of other variables.</span><br><span class="line">--without-stream_split_clients_module</span><br><span class="line">disables building the ngx_stream_split_clients_module module that creates variables <span class="keyword">for</span> A/B testing.</span><br><span class="line">--without-stream_return_module</span><br><span class="line">disables building the ngx_stream_return_module module that sends some specified value to the client and <span class="keyword">then</span> closes the connection.</span><br><span class="line">--without-stream_upstream_hash_module</span><br><span class="line">disables building a module that implements the <span class="built_in">hash</span> load balancing method.</span><br><span class="line">--without-stream_upstream_least_conn_module</span><br><span class="line">disables building a module that implements the least_conn load balancing method.</span><br><span class="line">--without-stream_upstream_zone_module</span><br><span class="line">disables building a module that makes it possible to store run-time state of an upstream group <span class="keyword">in</span> a shared memory zone.</span><br><span class="line">--with-google_perftools_module</span><br><span class="line">enables building the ngx_google_perftools_module module that enables profiling of nginx worker processes using Google Performance Tools. The module is intended <span class="keyword">for</span> nginx developers and is not built by default.</span><br><span class="line">--with-cpp_test_module</span><br><span class="line">enables building the ngx_cpp_test_module module.</span><br><span class="line">--add-module=path</span><br><span class="line">enables an external module.</span><br><span class="line">--add-dynamic-module=path</span><br><span class="line">enables an external dynamic module.</span><br><span class="line">--with-compat</span><br><span class="line">enables dynamic modules compatibility.</span><br><span class="line">--with-cc=path</span><br><span class="line">sets the name of the C compiler.</span><br><span class="line">--with-cpp=path</span><br><span class="line">sets the name of the C preprocessor.</span><br><span class="line">--with-cc-opt=parameters</span><br><span class="line">sets additional parameters that will be added to the CFLAGS variable. When using the system PCRE library under FreeBSD, --with-cc-opt=<span class="string">"-I /usr/local/include"</span> should be specified. If the number of files supported by select() needs to be increased it can also be specified here such as this: --with-cc-opt=<span class="string">"-D FD_SETSIZE=2048"</span>.</span><br><span class="line">--with-ld-opt=parameters</span><br><span class="line">sets additional parameters that will be used during linking. When using the system PCRE library under FreeBSD, --with-ld-opt=<span class="string">"-L /usr/local/lib"</span> should be specified.</span><br><span class="line">--with-cpu-opt=cpu</span><br><span class="line">enables building per specified CPU: pentium, pentiumpro, pentium3, pentium4, athlon, opteron, sparc32, sparc64, ppc64.</span><br><span class="line">--without-pcre</span><br><span class="line">disables the usage of the PCRE library.</span><br><span class="line">--with-pcre</span><br><span class="line">forces the usage of the PCRE library.</span><br><span class="line">--with-pcre=path</span><br><span class="line">sets the path to the sources of the PCRE library. The library distribution (version 4.4 — 8.42) needs to be downloaded from the PCRE site and extracted. The rest is <span class="keyword">done</span> by nginx’s ./configure and make. The library is required <span class="keyword">for</span> regular expressions support <span class="keyword">in</span> the location directive and <span class="keyword">for</span> the ngx_http_rewrite_module module.</span><br><span class="line">--with-pcre-opt=parameters</span><br><span class="line">sets additional build options <span class="keyword">for</span> PCRE.</span><br><span class="line">--with-pcre-jit</span><br><span class="line">builds the PCRE library with “just-in-time compilation” support (1.1.12, the pcre_jit directive).</span><br><span class="line">--with-zlib=path</span><br><span class="line">sets the path to the sources of the zlib library. The library distribution (version 1.1.3 — 1.2.11) needs to be downloaded from the zlib site and extracted. The rest is <span class="keyword">done</span> by nginx’s ./configure and make. The library is required <span class="keyword">for</span> the ngx_http_gzip_module module.</span><br><span class="line">--with-zlib-opt=parameters</span><br><span class="line">sets additional build options <span class="keyword">for</span> zlib.</span><br><span class="line">--with-zlib-asm=cpu</span><br><span class="line">enables the use of the zlib assembler sources optimized <span class="keyword">for</span> one of the specified CPUs: pentium, pentiumpro.</span><br><span class="line">--with-libatomic</span><br><span class="line">forces the libatomic_ops library usage.</span><br><span class="line">--with-libatomic=path</span><br><span class="line">sets the path to the libatomic_ops library sources.</span><br><span class="line">--with-openssl=path</span><br><span class="line">sets the path to the OpenSSL library sources.</span><br><span class="line">--with-openssl-opt=parameters</span><br><span class="line">sets additional build options <span class="keyword">for</span> OpenSSL.</span><br><span class="line">--with-debug</span><br><span class="line">enables the debugging <span class="built_in">log</span>.</span><br></pre></td></tr></table></figure></div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;通过存储库安装nginx&quot;&gt;&lt;a href=&quot;#通过存储库安装nginx&quot; class=&quot;headerlink&quot; title=&quot;通过存储库安装nginx&quot;&gt;&lt;/a&gt;通过存储库安装nginx&lt;/h2&gt;&lt;p&gt;CentOS 6.x系统：&lt;br&gt;&lt;figure class
      
    
    </summary>
    
      <category term="nginx" scheme="http://blog.kapyan.top/categories/nginx/"/>
    
      <category term="nginx安装" scheme="http://blog.kapyan.top/categories/nginx/nginx%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="nginx" scheme="http://blog.kapyan.top/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>gitlab个人的简单使用</title>
    <link href="http://blog.kapyan.top/gitlab%E4%B8%AA%E4%BA%BA%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html"/>
    <id>http://blog.kapyan.top/gitlab个人的简单使用.html</id>
    <published>2019-01-04T09:30:37.000Z</published>
    <updated>2019-01-05T07:15:41.648Z</updated>
    
    <content type="html"><![CDATA[<h2 id="个人设置"><a href="#个人设置" class="headerlink" title="个人设置"></a>个人设置</h2><p><img src="/gitlab个人的简单使用/setting.png" alt="个人设置"></p><h2 id="头像、语言设置"><a href="#头像、语言设置" class="headerlink" title="头像、语言设置"></a>头像、语言设置</h2><p><img src="/gitlab个人的简单使用/baseset.png" alt="头像、语言设置"></p><h2 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h2><p><img src="/gitlab个人的简单使用/updatepassword.png" alt="修改密码"></p><h2 id="免密设置"><a href="#免密设置" class="headerlink" title="免密设置"></a>免密设置</h2><p><img src="/gitlab个人的简单使用/ssh.png" alt="免密设置"><br>添加公钥后可在操作git仓库时免去输入用户名、密码的步骤。<br>公钥获取：<br><code>windows系统：打开C:\用户\username\\.ssh\id_rsa.pub文件，将内容复制到填写公钥的位置，其中username为当前用户名，一般是administrator</code><br><code>linux系统：输入cat ~/.ssh/id_rsa.pub命令，将内容复制到填写公钥的位置。</code><br>如果没有id_rsa.pub文件，则需要创建秘钥，创建方法如下：<br><code>windows系统：按“win+R”键，输入“cmd”并回车打开cmd窗口，输入“ssh-keygen”，按三次回车键，创建完成</code><br><code>linux系统：在终端里输入“ssh-keygen”，按三次回车键，创建完成</code></p><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p><img src="/gitlab个人的简单使用/newproject.png" alt="创建项目"><br><img src="/gitlab个人的简单使用/project.png" alt="创建项目"></p><h2 id="获取项目地址、下载项目"><a href="#获取项目地址、下载项目" class="headerlink" title="获取项目地址、下载项目"></a>获取项目地址、下载项目</h2><p><img src="/gitlab个人的简单使用/projectadd.png" alt="项目地址"><br><img src="/gitlab个人的简单使用/getproject.png" alt="项目地址"></p><h2 id="项目权限设置、添加项目成员"><a href="#项目权限设置、添加项目成员" class="headerlink" title="项目权限设置、添加项目成员"></a>项目权限设置、添加项目成员</h2><p><img src="/gitlab个人的简单使用/setproject.png" alt="项目权限设置"><br><img src="/gitlab个人的简单使用/projectmu.png" alt="添加项目成员"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;个人设置&quot;&gt;&lt;a href=&quot;#个人设置&quot; class=&quot;headerlink&quot; title=&quot;个人设置&quot;&gt;&lt;/a&gt;个人设置&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/gitlab个人的简单使用/setting.png&quot; alt=&quot;个人设置&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;
      
    
    </summary>
    
      <category term="gitlab" scheme="http://blog.kapyan.top/categories/gitlab/"/>
    
    
      <category term="gitlab" scheme="http://blog.kapyan.top/tags/gitlab/"/>
    
  </entry>
  
  <entry>
    <title>geoserver+postgresql搭建</title>
    <link href="http://blog.kapyan.top/geoserver-postgresql%E6%90%AD%E5%BB%BA.html"/>
    <id>http://blog.kapyan.top/geoserver-postgresql搭建.html</id>
    <published>2019-01-02T03:05:47.000Z</published>
    <updated>2019-01-05T03:49:44.091Z</updated>
    
    <content type="html"><![CDATA[<h2 id="geoserver简介"><a href="#geoserver简介" class="headerlink" title="geoserver简介:"></a><strong>geoserver简介:</strong></h2><p>&ensp;&ensp;&ensp;&ensp;Geoserver是一个功能齐全,遵循OGC开放标准的开源WFS-T和WMS服务器。利用Geoserver可以把数据作为maps/images来发布(利用WMS来实现)也可以直接发布实际的数据(利用WFS来实现),同时也提供了修改,删除和新增的功能(利用WFS-T)。它是开源的 ,允许用户查看和编辑地理数据。GeoServer 是符合OGC 规范的一个全功能的WFS-T 和WMS server。</p><h2 id="geoserver-postgresql环境搭建："><a href="#geoserver-postgresql环境搭建：" class="headerlink" title="geoserver+postgresql环境搭建："></a><strong>geoserver+postgresql环境搭建：</strong></h2><h3 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a><strong>实验环境</strong></h3><ul><li>系统及版本：Ubuntu16.0.4</li><li>jdk版本：1.8.0</li><li>tomcat版本：8.5</li><li>geoserver版本：2.14.1</li><li>postgresql版本：9.6</li><li>postgis版本：2.5</li></ul><h3 id="开始搭建："><a href="#开始搭建：" class="headerlink" title="开始搭建："></a><strong>开始搭建：</strong></h3><h4 id="1-安装jdk1-8"><a href="#1-安装jdk1-8" class="headerlink" title="1. 安装jdk1.8"></a>1. 安装jdk1.8</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y openjdk-8-jdk</span><br></pre></td></tr></table></figure><h4 id="2-安装tomcat8-5"><a href="#2-安装tomcat8-5" class="headerlink" title="2. 安装tomcat8.5"></a>2. 安装tomcat8.5</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo wget https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-8/v8.5.37/bin/apache-tomcat-8.5.37.tar.gz<span class="comment">#下载Tomcat</span></span><br><span class="line">tar xf apache-tomcat-8.5.37.tar.gz -C /usr/<span class="built_in">local</span>/ &amp;&amp; mv /usr/<span class="built_in">local</span>/apache-tomcat-8.5.37 /usr/<span class="built_in">local</span>/tomcat    <span class="comment">#解压Tomcat至/usr/local/tomcat目录</span></span><br></pre></td></tr></table></figure><h4 id="3-安装geoserver"><a href="#3-安装geoserver" class="headerlink" title="3. 安装geoserver"></a>3. 安装geoserver</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo wget https://nchc.dl.sourceforge.net/project/geoserver/GeoServer/2.14.1/geoserver-2.14.1-war.zip<span class="comment">#下载geoserver2.14.1</span></span><br><span class="line">sudo unzip geoserver-2.14.1-war.zip &amp;&amp; sudo unzip -d  /usr/<span class="built_in">local</span>/tomcat/webapps/geoserver geoserver.war<span class="comment">#解压geoserver压缩包至/usr/local/tomcat/webapps/geoserver目录</span></span><br></pre></td></tr></table></figure><p><em>注：提示”unzip: command not found”，请使用sudo apt-get install -y zip 安装zip</em><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/tomcat/bin/startup.sh<span class="comment">#启动tomcat</span></span><br></pre></td></tr></table></figure></p><p>tomcat启动成功后，在浏览器打开<a href="http://host_ip:8080/geoserver" target="_blank" rel="noopener">http://host_ip:8080/geoserver</a>  访问geoserver服务<br>将host_ip替换为server的ip地址，默认用户名：admin 密码：geoserver</p><h4 id="4-安装postgresql-9-6和postgis-2-5"><a href="#4-安装postgresql-9-6和postgis-2-5" class="headerlink" title="4. 安装postgresql-9.6和postgis-2.5"></a>4. 安装postgresql-9.6和postgis-2.5</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">echo</span> <span class="string">'deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main'</span>&gt;&gt;/etc/apt/sources.list.d/pgdg.list<span class="comment">#添加postgresql安装源</span></span><br><span class="line">sudo wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -<span class="comment">#导入存储库签名秘钥</span></span><br><span class="line">sudo apt-get update<span class="comment">#更新包列表</span></span><br><span class="line">sudo apt-get install -y postgresql-9.6<span class="comment">#安装postgresql9.6</span></span><br><span class="line">sudo apt-get install -y postgresql-9.6-postgis-2.5<span class="comment">#安装postgresql9.6对应的postgis扩展</span></span><br><span class="line">sudo service postgresql start <span class="comment">#启动postgresql服务</span></span><br></pre></td></tr></table></figure><p>至此geoserver+postgresql搭建完成！<br>参考资料：<a href="https://www.postgresql.org/download/linux/ubuntu/" target="_blank" rel="noopener">postgresql官方安装文档</a></p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a><strong>FAQ</strong></h2><h3 id="添加nginx反向代理"><a href="#添加nginx反向代理" class="headerlink" title="添加nginx反向代理"></a>添加nginx反向代理</h3><p>在nginx添加以下host文件配置，并重启<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">server_name</span> domain_name;<span class="comment">#你的域名</span></span><br><span class="line">    <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Origin'</span> *;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Credentials'</span> <span class="string">'true'</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Headers'</span> <span class="string">'Authorization,Content-Type,Accept,Origin,User-Agent,DNT,Cache-Control,X-Mx-ReqToken,X-Requested-With'</span>;</span><br><span class="line">        <span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Methods'</span> <span class="string">'GET,POST,OPTIONS'</span>;</span><br><span class="line">        <span class="comment">#配置跨域允许，防止程序调用geoserver被跨域拦截</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">proxy_pass</span>  http://localhost:8080;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>:<span class="variable">$server_port</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="geoserver添加JDBC-Image-Mosaic扩展"><a href="#geoserver添加JDBC-Image-Mosaic扩展" class="headerlink" title="geoserver添加JDBC Image Mosaic扩展"></a>geoserver添加JDBC Image Mosaic扩展</h3><p>下载JDBC Image Mosaic扩展并解压至geoserver所在目录的WEB-INF/lib/目录下<br><a href="http://geoserver.org/release/2.14.1/" target="_blank" rel="noopener">geoserver2.14.1及扩展下载地址</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://jaist.dl.sourceforge.net/project/geoserver/GeoServer/2.14.1/extensions/geoserver-2.14.1-imagemosaic-jdbc-plugin.zip<span class="comment">#下载JDBC Image Mosaic扩展</span></span><br><span class="line">unzip -d /usr/<span class="built_in">local</span>/tomcat/webapps/geoserver/WEB-INF/lib/ geoserver-2.14.1-imagemosaic-jdbc-plugin.zip<span class="comment">#解压至geoserver所在目录的WEB-INF/lib/目录下</span></span><br></pre></td></tr></table></figure></p><h3 id="postgresql开启远程连接"><a href="#postgresql开启远程连接" class="headerlink" title="postgresql开启远程连接"></a>postgresql开启远程连接</h3><p>1.修改/etc/postgresql/9.6/main/postgresql.conf第59行：</p><pre><code>#listen_addresses = &apos;localhost&apos;  为    listen_addresses = &apos;*&apos;</code></pre><p>2.在/etc/postgresql/9.6/main/pg_hba.conf的</p><pre><code># IPv4 local connections:host all all 127.0.0.1/32 md5 后添加一行：host all all 0.0.0.0/0 md5</code></pre><p>注：0.0.0.0/0代码允许所有网段访问，也可指定特定网段，如192.168.1.0/24</p><h3 id="postgresql创建超级用户"><a href="#postgresql创建超级用户" class="headerlink" title="postgresql创建超级用户"></a>postgresql创建超级用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su postgres <span class="comment">#切换至postgres用户</span></span><br><span class="line">psql <span class="comment">#进入postgresql</span></span><br><span class="line">CREATE ROLE <span class="built_in">test</span> superuser PASSWORD <span class="string">'123456'</span> login;<span class="comment">#创建名为test，密码为123456的超级用户</span></span><br><span class="line">\du <span class="comment">#查看所有用户</span></span><br></pre></td></tr></table></figure><h3 id="为数据库添加postgis空间数据库扩展"><a href="#为数据库添加postgis空间数据库扩展" class="headerlink" title="为数据库添加postgis空间数据库扩展"></a>为数据库添加postgis空间数据库扩展</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">su postgres <span class="comment">#切换至postgres用户</span></span><br><span class="line">psql -d yourdatabase -c <span class="string">"CREATE EXTENSION postgis;"</span></span><br><span class="line">psql -d yourdatabase -c <span class="string">"CREATE EXTENSION postgis_topology;"</span></span><br><span class="line">psql -d yourdatabase -c <span class="string">"CREATE EXTENSION postgis_sfcgal;"</span></span><br><span class="line">psql -d yourdatabase -c <span class="string">"CREATE EXTENSION fuzzystrmatch;"</span></span><br><span class="line">psql -d yourdatabase -c <span class="string">"CREATE EXTENSION address_standardizer;"</span></span><br><span class="line">psql -d yourdatabase -c <span class="string">"CREATE EXTENSION address_standardizer_data_us;"</span></span><br><span class="line">psql -d yourdatabase -c <span class="string">"CREATE EXTENSION postgis_tiger_geocoder;"</span></span><br></pre></td></tr></table></figure><h3 id="GDAL-PostGIS-Raster-driver未找到"><a href="#GDAL-PostGIS-Raster-driver未找到" class="headerlink" title="GDAL PostGIS Raster driver未找到"></a>GDAL PostGIS Raster driver未找到</h3><p>从postgis2.1.3开始，默认禁用out-of-db rasters和所有raster驱动，启用他们需要在系统中设置环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"POSTGIS_GDAL_ENABLED_DRIVERS=ENABLE_ALL"</span>&gt;&gt; /etc/postgresql/9.6/main/environment<span class="comment">#添加环境变量</span></span><br><span class="line">service postgresql restart<span class="comment">#重启postgresql</span></span><br></pre></td></tr></table></figure></p><p>参考资料：<a href="http://postgis.net/docs/postgis_installation.html#install_short_version" target="_blank" rel="noopener">postgis官方安装文档</a></p><h3 id="Geoserver发布shapfile，中文字段乱码问题"><a href="#Geoserver发布shapfile，中文字段乱码问题" class="headerlink" title="Geoserver发布shapfile，中文字段乱码问题"></a>Geoserver发布shapfile，中文字段乱码问题</h3><p>如果预览视图显示中文为“□□□□”，是因为系统中没有相应的字体，需要安装字体，可以在windows系统的C:\Windows\fonts目录下找到需要的字体，并上传至/usr/share/fonts/custom目录下（没有则新建custom目录），并在/usr/share/fonts/custom目录执行以下命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y font-manager <span class="comment">#安装字体管理工具</span></span><br><span class="line">sudo mkfontscale</span><br><span class="line">sudo mkfontdir</span><br><span class="line">sudo <span class="built_in">fc</span>-cache -fv</span><br></pre></td></tr></table></figure></p><p>如果xml的中文显示为’???’，是因为系统的默认编码可能不支持中文，如“POSIX”<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo locale<span class="comment">#查看当前系统编码</span></span><br><span class="line">sudo locale-a<span class="comment">#查看系统支持的所有编码</span></span><br><span class="line"><span class="built_in">export</span> LANG=<span class="string">"en_US.UTF-8"</span><span class="comment">#修改系统编码（临时修改）</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;geoserver简介&quot;&gt;&lt;a href=&quot;#geoserver简介&quot; class=&quot;headerlink&quot; title=&quot;geoserver简介:&quot;&gt;&lt;/a&gt;&lt;strong&gt;geoserver简介:&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;&amp;ensp;&amp;ensp;&amp;en
      
    
    </summary>
    
      <category term="geoserver" scheme="http://blog.kapyan.top/categories/geoserver/"/>
    
    
      <category term="geoserver" scheme="http://blog.kapyan.top/tags/geoserver/"/>
    
      <category term="postgresql" scheme="http://blog.kapyan.top/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://blog.kapyan.top/hello-world.html"/>
    <id>http://blog.kapyan.top/hello-world.html</id>
    <published>2018-12-29T07:46:30.718Z</published>
    <updated>2018-12-29T07:46:30.718Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
